# Redis集群

## AKF原则
AKF原则是指在进行分布式服务扩容时的三个维度，我们可以通过在这三个维度上来进行扩展使系统的性能得到提升。  
AKF原则主要解决了分布式服务的一些问题：
1. 单点问题
2. 容量
3. 连接数

三个方向的扩容原则 ：
- x: 复制扩展
- y: 基于功能拆分扩展
- z: 基于用户扩展

以 Redis服务 为例：
- x方向： 在此方向上的扩展可以解决单点问题
    - 主从： 职能分离，从节点不可代替主节点。一般主节点可以进行读写操作，而从节点只提供读操作。主节点需要向从节点进行数据备份。可以解决连接数问题
    - 主备： 备用服务节点一般不启用，只是在主节点出问题时，启动代替主节点，备用节点的功能与主节点完全相同。解决不了连接数问题，只能解决单点问题
- y方向： 在此方向上的扩展可以解决连接数问题
    - 功能拆分，将不同业务缓存到不同的redis节点上，这样单个redis上只接收部分业务的请求
- z方向：对同一块业务的数据进行分库分表



## CAP原则
在分布式系统中，`数据一致性`,`可靠性`,`分区容错性`三者最多同时满足两个条件。

## Redis集群配置

### 手动配置
比如说我们本机启动三个redis服务，首先启动一个端口为6379的redis服务：
    `redis-server redis`
### sentinel 哨兵机制



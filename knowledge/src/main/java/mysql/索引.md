# 索引

## 索引底层实现

### HashTable
![hashtable](../../img/mysql/hashtable.PNG)  

hashtable对等值查询比较友好，但是对于范围查询，需要对每个元素进行重遍历来定位，而在生产中范围查询出现的频率又是比较多的。
当然啦，对于大部分存储引擎来说，不支持HashTable格式的索引，目前只有Memory支持HashTable索引。

### B+树 
InnoDB和MYISAM索引底层实现的数据结构都是B+树，为什么要选择B+树，我们可以通过对比其他数据类型来得到答案。
- 二叉搜索、二叉平衡树、红黑树

 1. 二叉搜索在插入数据时可能会造成数据倾斜问题，在最坏情况下甚至可能会退化成链表结构。
 2. 二叉平衡树会通过旋转来调整树的结构，但是问题是这种旋转带来的开销比较大，如果大量的插入或者删除造成频繁的旋转，那么总体而已， 插入或者删除时的效率难以接收。二叉平衡树对查找会比较友好，查找的时间复杂度为O(logn)。
 3. 红黑树，通过增加颜色来降低旋转的次数，红黑树可以接受最大树深在最小树深两倍的范围内。

这三种树有个通用的问题，即孩子节点只有两个，即树深度会随着数据量的增加而增加，虽然每一层所能包含的数据量都是上一层的两倍， 但是树的高度依旧会比较大，这样在遍历时的代价可能就会很高。

- B树 
  谈B+树之前我们可以先了解一下B树，看一下B树相对于二叉树有什么优势，而又有那些问题所以让存储引擎最终选择了B+树
  
   ![B树](../../img/mysql/B树.PNG)
 
  1. 
    

    
   